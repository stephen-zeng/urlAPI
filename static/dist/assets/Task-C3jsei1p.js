import{i as _,o as d,c,a as l,F as g,r as y,t as h,u as x,N as E,_ as F,b,p as j,d as N,w as T,e as $,T as A,f as w}from"./index-B8qKjx1U.js";const V=["open"],R=["onClick","data-clipboard-text"],S={__name:"Detail",setup(k){const i=_("dialogStatus"),r=_("target"),p=async e=>{try{await navigator.clipboard.writeText(e),E("Copied")}catch{E("Copy failed")}};return(e,u)=>(d(),c("mdui-dialog",{open:x(i),onClose:u[0]||(u[0]=m=>i.value=!1),"close-on-overlay-click":"","close-on-esc":"",headline:"Detail",description:"The detailed information of this task"},[l("mdui-list",null,[(d(!0),c(g,null,y(x(r),(m,a)=>(d(),c("mdui-list-item",{onClick:v=>p(m),class:"copy","data-clipboard-text":m},h(a)+" - "+h(m),9,R))),256))])],40,V))}},D={class:"showcase"},I={class:"mdui-table"},B=["onClick"],M={__name:"Showcase",setup(k){const i=b(!1),r=b(0),p=b([]),e=_("emitter"),u=_("catagory"),m=_("by"),a=_("page"),v=_("title"),o=_("maxPage");j("dialogStatus",i),j("target",r);async function s(){m.value===""?v.value="任务查看":v.value="任务查看 → "+(m.value===""?"N/A":m.value);const f=await A("fetchTask",u.value,m.value,a.value);f&&(p.value=f.task_data,o.value=f.task_max_page)}N(async()=>{await s()});function t(f){r.value=f,i.value=!0}function n(f){let C=new Date(f).toJSON();return new Date(+new Date(C)+8*3600*1e3).toISOString().replace(/T/g," ").replace(/\.\d{3}Z/,"")}return T(e,async f=>{switch(f){case 1:a.value=1,v.value="任务查看",m.value="",u.value="none",await s();break;case 2:a.value>1&&(a.value--,await s());break;case 3:a.value<o.value&&(a.value++,await s());break;case 4:a.value=1,await s();break}e.value=0}),(f,C)=>(d(),c(g,null,[l("div",D,[l("table",I,[C[0]||(C[0]=l("thead",null,[l("tr",null,[l("th",null,"时间"),l("th",null,"类型"),l("th",null,"地区"),l("th",null,"状态")])],-1)),l("tbody",null,[(d(!0),c(g,null,y(p.value,O=>(d(),c("tr",{onClick:Pe=>t(O)},[l("td",null,h(n(O.time)),1),l("td",null,h(O.type),1),l("td",null,h(O.region),1),l("td",null,h(O.status),1)],8,B))),256))])])]),$(S)],64))}},P=F(M,[["__scopeId","data-v-de6c61b3"]]),J={rounded:""},L=["disabled"],Y={style:{"margin-left":"2.5rem"}},Z=["onClick"],q={__name:"Type",props:["tasks","fetched"],emits:["refresh"],setup(k,{emit:i}){const r=k,p=i,e=b({}),u=_("catagory"),m=_("by");function a(o){Object.keys(e.value).length&&(e.value={});for(let t of o)t.type in e.value?e.value[t.type]++:e.value[t.type]=1;const s=Object.entries(e.value).sort((t,n)=>n[1]-t[1]);e.value=Object.fromEntries(s)}function v(o){u.value="type",m.value=o,p("refresh")}return(o,s)=>(d(),c("mdui-collapse",null,[l("mdui-collapse-item",J,[l("mdui-list-item",{slot:"header",icon:"assessment",rounded:"",onClick:s[0]||(s[0]=t=>a(r.tasks)),disabled:!r.fetched},s[1]||(s[1]=[w(" 种类 "),l("mdui-icon",{slot:"end-icon",name:"keyboard_arrow_down"},null,-1)]),8,L),l("div",Y,[(d(!0),c(g,null,y(e.value,(t,n)=>(d(),c("mdui-list-item",{rounded:"",slot:"custom",onClick:f=>v(n)},h(n)+" - "+h(t)+"次 ",9,Z))),256))])])]))}},z={rounded:""},G=["disabled"],H={style:{"margin-left":"2.5rem"}},K=["onClick"],Q={__name:"Model",props:["tasks","fetched"],emits:["refresh"],setup(k,{emit:i}){const r=k,p=i,e=b({}),u=_("catagory"),m=_("by");function a(o){Object.keys(e.value).length&&(e.value={});for(let t of o)t.model in e.value?e.value[t.model]++:e.value[t.model]=1;const s=Object.entries(e.value).sort((t,n)=>n[1]-t[1]);e.value=Object.fromEntries(s)}function v(o){u.value="model",m.value=o===""?"N/A":o,p("refresh")}return(o,s)=>(d(),c("mdui-collapse",null,[l("mdui-collapse-item",z,[l("mdui-list-item",{slot:"header",icon:"perm_device_information",rounded:"",onClick:s[0]||(s[0]=t=>a(r.tasks)),disabled:!r.fetched},s[1]||(s[1]=[w(" 模型 "),l("mdui-icon",{slot:"end-icon",name:"keyboard_arrow_down"},null,-1)]),8,G),l("div",H,[(d(!0),c(g,null,y(e.value,(t,n)=>(d(),c("mdui-list-item",{rounded:"",slot:"custom",onClick:f=>v(n)},h(n===""?"N/A":n)+" - "+h(t)+"次 ",9,K))),256))])])]))}},U={rounded:""},W=["disabled"],X={style:{"margin-left":"2.5rem"}},ee=["onClick"],te={__name:"Time",props:["tasks","fetched"],emits:["refresh"],setup(k,{emit:i}){const r=k,p=i,e=b({}),u=_("catagory"),m=_("by");function a(s){const t=new Date(s),n=t.getFullYear().toString(),f=(t.getMonth()+1).toString();return n+"."+f}function v(s){Object.keys(e.value).length&&(e.value={});for(let n of s){const f=a(n.time);f in e.value?e.value[f]++:e.value[f]=1}const t=Object.entries(e.value).sort((n,f)=>f[1]-n[1]);e.value=Object.fromEntries(t)}function o(s){u.value="time",m.value=s===""?"N/A":s,p("refresh")}return(s,t)=>(d(),c("mdui-collapse",null,[l("mdui-collapse-item",U,[l("mdui-list-item",{slot:"header",icon:"date_range",rounded:"",onClick:t[0]||(t[0]=n=>v(r.tasks)),disabled:!r.fetched},t[1]||(t[1]=[w(" 时间 "),l("mdui-icon",{slot:"end-icon",name:"keyboard_arrow_down"},null,-1)]),8,W),l("div",X,[(d(!0),c(g,null,y(e.value,(n,f)=>(d(),c("mdui-list-item",{rounded:"",slot:"custom",onClick:C=>o(f)},h(f===""?"N/A":f)+" - "+h(n)+"次 ",9,ee))),256))])])]))}},se={rounded:""},ne=["disabled"],oe={style:{"margin-left":"2.5rem"}},le=["onClick"],ae={__name:"Status",props:["tasks","fetched"],emits:["refresh"],setup(k,{emit:i}){const r=k,p=i,e=b({}),u=_("catagory"),m=_("by");function a(o){Object.keys(e.value).length&&(e.value={});for(let t of o)t.status in e.value?e.value[t.status]++:e.value[t.status]=1;const s=Object.entries(e.value).sort((t,n)=>n[1]-t[1]);e.value=Object.fromEntries(s)}function v(o){u.value="status",m.value=o,p("refresh")}return(o,s)=>(d(),c("mdui-collapse",null,[l("mdui-collapse-item",se,[l("mdui-list-item",{slot:"header",icon:"done",rounded:"",onClick:s[0]||(s[0]=t=>a(r.tasks)),disabled:!r.fetched},s[1]||(s[1]=[w(" 状态 "),l("mdui-icon",{slot:"end-icon",name:"keyboard_arrow_down"},null,-1)]),8,ne),l("div",oe,[(d(!0),c(g,null,y(e.value,(t,n)=>(d(),c("mdui-list-item",{rounded:"",slot:"custom",onClick:f=>v(n)},h(n)+" - "+h(t)+"次 ",9,le))),256))])])]))}},ie={rounded:""},re=["disabled"],ue={style:{"margin-left":"2.5rem"}},de=["onClick"],ce={__name:"API",props:["tasks","fetched"],emits:["refresh"],setup(k,{emit:i}){const r=k,p=i,e=b({}),u=_("catagory"),m=_("by");function a(o){Object.keys(e.value).length&&(e.value={});for(let t of o)t.api in e.value?e.value[t.api]++:e.value[t.api]=1;const s=Object.entries(e.value).sort((t,n)=>n[1]-t[1]);e.value=Object.fromEntries(s)}function v(o){u.value="api",m.value=o===""?"N/A":o,p("refresh")}return(o,s)=>(d(),c("mdui-collapse",null,[l("mdui-collapse-item",ie,[l("mdui-list-item",{slot:"header",icon:"settings_applications",rounded:"",onClick:s[0]||(s[0]=t=>a(r.tasks)),disabled:!r.fetched},s[1]||(s[1]=[w(" 接口 "),l("mdui-icon",{slot:"end-icon",name:"keyboard_arrow_down"},null,-1)]),8,re),l("div",ue,[(d(!0),c(g,null,y(e.value,(t,n)=>(d(),c("mdui-list-item",{rounded:"",slot:"custom",onClick:f=>v(n)},h(n===""?"N/A":n)+" - "+h(t)+"次 ",9,de))),256))])])]))}},me={rounded:""},ve=["disabled"],fe={style:{"margin-left":"2.5rem"}},_e=["onClick"],pe={__name:"Region",props:["tasks","fetched"],emits:["refresh"],setup(k,{emit:i}){const r=k,p=i,e=b({}),u=_("catagory"),m=_("by");function a(o){Object.keys(e.value).length&&(e.value={});for(let t of o)t.region in e.value?e.value[t.region]++:e.value[t.region]=1;const s=Object.entries(e.value).sort((t,n)=>n[1]-t[1]);e.value=Object.fromEntries(s)}function v(o){u.value="region",m.value=o,p("refresh")}return(o,s)=>(d(),c("mdui-collapse",null,[l("mdui-collapse-item",me,[l("mdui-list-item",{slot:"header",icon:"location_on",rounded:"",onClick:s[0]||(s[0]=t=>a(r.tasks)),disabled:!r.fetched},s[1]||(s[1]=[w(" 地区 "),l("mdui-icon",{slot:"end-icon",name:"keyboard_arrow_down"},null,-1)]),8,ve),l("div",fe,[(d(!0),c(g,null,y(e.value,(t,n)=>(d(),c("mdui-list-item",{rounded:"",slot:"custom",onClick:f=>v(n)},h(n)+" - "+h(t)+"次 ",9,_e))),256))])])]))}},he={rounded:""},ke=["disabled"],be={style:{"margin-left":"2.5rem"}},$e=["onClick"],ge={__name:"Device",props:["tasks","fetched"],emits:["refresh"],setup(k,{emit:i}){const r=k,p=i,e=b({}),u=_("catagory"),m=_("by");function a(o){Object.keys(e.value).length&&(e.value={});for(let t of o)t.device in e.value?e.value[t.device]++:e.value[t.device]=1;const s=Object.entries(e.value).sort((t,n)=>n[1]-t[1]);e.value=Object.fromEntries(s)}function v(o){u.value="device",m.value=o===""?"N/A":o,p("refresh")}return(o,s)=>(d(),c("mdui-collapse",null,[l("mdui-collapse-item",he,[l("mdui-list-item",{slot:"header",icon:"devices",rounded:"",onClick:s[0]||(s[0]=t=>a(r.tasks)),disabled:!r.fetched},s[1]||(s[1]=[w(" 设备 "),l("mdui-icon",{slot:"end-icon",name:"keyboard_arrow_down"},null,-1)]),8,ke),l("div",be,[(d(!0),c(g,null,y(e.value,(t,n)=>(d(),c("mdui-list-item",{rounded:"",slot:"custom",onClick:f=>v(n)},h(n===""?"Other":n)+" - "+h(t)+"次 ",9,$e))),256))])])]))}},ye={rounded:""},we=["disabled"],Ce={style:{"margin-left":"2.5rem"}},Oe=["onClick"],je={__name:"Referer",props:["tasks","fetched"],emits:["refresh"],setup(k,{emit:i}){const r=k,p=i,e=b({}),u=_("catagory"),m=_("by");function a(o){Object.keys(e.value).length&&(e.value={});for(let t of o)t.referer in e.value?e.value[t.referer]++:e.value[t.referer]=1;const s=Object.entries(e.value).sort((t,n)=>n[1]-t[1]);e.value=Object.fromEntries(s)}function v(o){u.value="referer",m.value=o===""?"N/A":o,p("refresh")}return(o,s)=>(d(),c("mdui-collapse",null,[l("mdui-collapse-item",ye,[l("mdui-list-item",{slot:"header",icon:"source",rounded:"",onClick:s[0]||(s[0]=t=>a(r.tasks)),disabled:!r.fetched},s[1]||(s[1]=[w(" 来源 "),l("mdui-icon",{slot:"end-icon",name:"keyboard_arrow_down"},null,-1)]),8,we),l("div",Ce,[(d(!0),c(g,null,y(e.value,(t,n)=>(d(),c("mdui-list-item",{rounded:"",slot:"custom",onClick:f=>v(n)},h(n===""?"N/A":n)+" - "+h(t)+"次 ",9,Oe))),256))])])]))}},xe={rounded:""},Ee=["disabled"],Ne={style:{"margin-left":"2.5rem"}},Ae=["onClick"],Fe={__name:"Info",props:["tasks","fetched"],emits:["refresh"],setup(k,{emit:i}){const r=k,p=i,e=b({}),u=_("catagory"),m=_("by");function a(o){Object.keys(e.value).length&&(e.value={});for(let t of o)t.more_info in e.value?e.value[t.more_info]++:e.value[t.more_info]=1;const s=Object.entries(e.value).sort((t,n)=>n[1]-t[1]);e.value=Object.fromEntries(s)}function v(o){u.value="more_info",m.value=o===""?"N/A":o,p("refresh")}return(o,s)=>(d(),c("mdui-collapse",null,[l("mdui-collapse-item",xe,[l("mdui-list-item",{slot:"header",icon:"info",rounded:"",onClick:s[0]||(s[0]=t=>a(r.tasks)),disabled:!r.fetched},s[1]||(s[1]=[w(" 信息 "),l("mdui-icon",{slot:"end-icon",name:"keyboard_arrow_down"},null,-1)]),8,Ee),l("div",Ne,[(d(!0),c(g,null,y(e.value,(t,n)=>(d(),c("mdui-list-item",{rounded:"",slot:"custom",onClick:f=>v(n)},h(n===""?"N/A":n)+" - "+h(t)+"次 ",9,Ae))),256))])])]))}},Te={rounded:""},Ve=["disabled"],Re={style:{"margin-left":"2.5rem"}},Se=["onClick"],De={__name:"Temp",props:["tasks","fetched"],emits:["refresh"],setup(k,{emit:i}){const r=k,p=i,e=b({}),u=_("catagory"),m=_("by");function a(o){Object.keys(e.value).length&&(e.value={});for(let t of o)t.temp in e.value?e.value[t.temp]++:e.value[t.temp]=1;const s=Object.entries(e.value).sort((t,n)=>n[1]-t[1]);e.value=Object.fromEntries(s)}function v(o){u.value="temp",m.value=o===""?"N/A":o,p("refresh")}return(o,s)=>(d(),c("mdui-collapse",null,[l("mdui-collapse-item",Te,[l("mdui-list-item",{slot:"header",icon:"file_download_done",rounded:"",onClick:s[0]||(s[0]=t=>a(r.tasks)),disabled:!r.fetched},s[1]||(s[1]=[w(" 缓存 "),l("mdui-icon",{slot:"end-icon",name:"keyboard_arrow_down"},null,-1)]),8,Ve),l("div",Re,[(d(!0),c(g,null,y(e.value,(t,n)=>(d(),c("mdui-list-item",{rounded:"",slot:"custom",onClick:f=>v(n)},h(n===""?"N/A":n)+" - "+h(t)+"次 ",9,Se))),256))])])]))}},Ie={class:"filter"},Be={__name:"Filter",setup(k){const i=b([]),r=_("catagory"),p=_("by"),e=_("emitter"),u=b(!1);return N(async()=>{u.value=!1;const m=await A("fetchTask",r.value,p.value);m&&(i.value=m.task_data,u.value=!0)}),(m,a)=>(d(),c("div",Ie,[$(pe,{tasks:i.value,onRefresh:a[0]||(a[0]=v=>e.value=4),fetched:u.value},null,8,["tasks","fetched"]),$(q,{tasks:i.value,onRefresh:a[1]||(a[1]=v=>e.value=4),fetched:u.value},null,8,["tasks","fetched"]),$(ae,{tasks:i.value,onRefresh:a[2]||(a[2]=v=>e.value=4),fetched:u.value},null,8,["tasks","fetched"]),$(ce,{tasks:i.value,onRefresh:a[3]||(a[3]=v=>e.value=4),fetched:u.value},null,8,["tasks","fetched"]),$(Q,{tasks:i.value,onRefresh:a[4]||(a[4]=v=>e.value=4),fetched:u.value},null,8,["tasks","fetched"]),$(je,{tasks:i.value,onRefresh:a[5]||(a[5]=v=>e.value=4),fetched:u.value},null,8,["tasks","fetched"]),$(te,{tasks:i.value,onRefresh:a[6]||(a[6]=v=>e.value=4),fetched:u.value},null,8,["tasks","fetched"]),$(ge,{tasks:i.value,onRefresh:a[7]||(a[7]=v=>e.value=4),fetched:u.value},null,8,["tasks","fetched"]),$(Fe,{tasks:i.value,onRefresh:a[8]||(a[8]=v=>e.value=4),fetched:u.value},null,8,["tasks","fetched"]),$(De,{tasks:i.value,onRefresh:a[9]||(a[9]=v=>e.value=4),fetched:u.value},null,8,["tasks","fetched"])]))}},Me={style:{display:"block"}},Le={__name:"Task",setup(k){const i=b("none"),r=b("");return j("catagory",i),j("by",r),(p,e)=>(d(),c("mdui-layout-main",Me,[$(P),$(Be)]))}};export{Le as default};
