import{i as m,o as u,c,a as l,F as $,r as h,t as p,u as x,N as E,_ as F,b as y,p as j,d as N,w as T,e as b,T as A,f as w}from"./index-BEmfi16I.js";const V=["open"],R=["onClick","data-clipboard-text"],S={__name:"Detail",setup(g){const i=m("dialogStatus"),f=m("target"),_=async e=>{try{await navigator.clipboard.writeText(e),E("Copied")}catch{E("Copy failed")}};return(e,v)=>(u(),c("mdui-dialog",{open:x(i),onClose:v[0]||(v[0]=a=>i.value=!1),"close-on-overlay-click":"","close-on-esc":"",headline:"Detail",description:"The detailed information of this task"},[l("mdui-list",null,[(u(!0),c($,null,h(x(f),(a,r)=>(u(),c("mdui-list-item",{onClick:k=>_(a),class:"copy","data-clipboard-text":a},p(r)+" - "+p(a),9,R))),256))])],40,V))}},D={class:"showcase"},I={class:"mdui-table"},B=["onClick"],M={__name:"Showcase",setup(g){const i=y(!1),f=y(0),_=y([]),e=m("emitter"),v=m("catagory"),a=m("by"),r=m("page"),k=m("title"),o=m("maxPage");j("dialogStatus",i),j("target",f);async function s(){a.value===""?k.value="任务查看":k.value="任务查看 → "+(a.value===""?"N/A":a.value);const d=await A("fetchTask",v.value,a.value,r.value);d&&(_.value=d.task_data,o.value=d.task_max_page)}N(async()=>{await s()});function t(d){f.value=d,i.value=!0}function n(d){let C=new Date(d).toJSON();return new Date(+new Date(C)+8*3600*1e3).toISOString().replace(/T/g," ").replace(/\.\d{3}Z/,"")}return T(e,async d=>{switch(d){case 1:r.value=1,k.value="任务查看",a.value="",v.value="none",await s();break;case 2:r.value>1&&(r.value--,await s());break;case 3:r.value<o.value&&(r.value++,await s());break;case 4:r.value=1,await s();break}e.value=0}),(d,C)=>(u(),c($,null,[l("div",D,[l("table",I,[C[0]||(C[0]=l("thead",null,[l("tr",null,[l("th",null,"时间"),l("th",null,"类型"),l("th",null,"地区"),l("th",null,"状态")])],-1)),l("tbody",null,[(u(!0),c($,null,h(_.value,O=>(u(),c("tr",{onClick:Ae=>t(O)},[l("td",null,p(n(O.time)),1),l("td",null,p(O.type),1),l("td",null,p(O.region),1),l("td",null,p(O.status),1)],8,B))),256))])])]),b(S)],64))}},P=F(M,[["__scopeId","data-v-de6c61b3"]]),J={rounded:""},L={style:{"margin-left":"2.5rem"}},Y=["onClick"],Z={__name:"Type",props:["tasks"],emits:["refresh"],setup(g,{emit:i}){const f=g,_=i,e=y({}),v=m("catagory"),a=m("by");function r(o){Object.keys(e.value).length&&(e.value={});for(let t of o)t.type in e.value?e.value[t.type]++:e.value[t.type]=1;const s=Object.entries(e.value).sort((t,n)=>n[1]-t[1]);e.value=Object.fromEntries(s)}function k(o){v.value="type",a.value=o,_("refresh")}return(o,s)=>(u(),c("mdui-collapse",null,[l("mdui-collapse-item",J,[l("mdui-list-item",{slot:"header",icon:"assessment",rounded:"",onClick:s[0]||(s[0]=t=>r(f.tasks))},s[1]||(s[1]=[w(" 种类 "),l("mdui-icon",{slot:"end-icon",name:"keyboard_arrow_down"},null,-1)])),l("div",L,[(u(!0),c($,null,h(e.value,(t,n)=>(u(),c("mdui-list-item",{rounded:"",slot:"custom",onClick:d=>k(n)},p(n)+" - "+p(t)+"次 ",9,Y))),256))])])]))}},q={rounded:""},z={style:{"margin-left":"2.5rem"}},G=["onClick"],H={__name:"Model",props:["tasks"],emits:["refresh"],setup(g,{emit:i}){const f=g,_=i,e=y({}),v=m("catagory"),a=m("by");function r(o){Object.keys(e.value).length&&(e.value={});for(let t of o)t.model in e.value?e.value[t.model]++:e.value[t.model]=1;const s=Object.entries(e.value).sort((t,n)=>n[1]-t[1]);e.value=Object.fromEntries(s)}function k(o){v.value="model",a.value=o===""?"N/A":o,_("refresh")}return(o,s)=>(u(),c("mdui-collapse",null,[l("mdui-collapse-item",q,[l("mdui-list-item",{slot:"header",icon:"perm_device_information",rounded:"",onClick:s[0]||(s[0]=t=>r(f.tasks))},s[1]||(s[1]=[w(" 模型 "),l("mdui-icon",{slot:"end-icon",name:"keyboard_arrow_down"},null,-1)])),l("div",z,[(u(!0),c($,null,h(e.value,(t,n)=>(u(),c("mdui-list-item",{rounded:"",slot:"custom",onClick:d=>k(n)},p(n===""?"N/A":n)+" - "+p(t)+"次 ",9,G))),256))])])]))}},K={rounded:""},Q={style:{"margin-left":"2.5rem"}},U=["onClick"],W={__name:"Time",props:["tasks"],emits:["refresh"],setup(g,{emit:i}){const f=g,_=i,e=y({}),v=m("catagory"),a=m("by");function r(s){const t=new Date(s),n=t.getFullYear().toString(),d=(t.getMonth()+1).toString();return n+"."+d}function k(s){Object.keys(e.value).length&&(e.value={});for(let n of s){const d=r(n.time);d in e.value?e.value[d]++:e.value[d]=1}const t=Object.entries(e.value).sort((n,d)=>d[1]-n[1]);e.value=Object.fromEntries(t)}function o(s){v.value="time",a.value=s===""?"N/A":s,_("refresh")}return(s,t)=>(u(),c("mdui-collapse",null,[l("mdui-collapse-item",K,[l("mdui-list-item",{slot:"header",icon:"date_range",rounded:"",onClick:t[0]||(t[0]=n=>k(f.tasks))},t[1]||(t[1]=[w(" 时间 "),l("mdui-icon",{slot:"end-icon",name:"keyboard_arrow_down"},null,-1)])),l("div",Q,[(u(!0),c($,null,h(e.value,(n,d)=>(u(),c("mdui-list-item",{rounded:"",slot:"custom",onClick:C=>o(d)},p(d===""?"N/A":d)+" - "+p(n)+"次 ",9,U))),256))])])]))}},X={rounded:""},ee={style:{"margin-left":"2.5rem"}},te=["onClick"],se={__name:"Status",props:["tasks"],emits:["refresh"],setup(g,{emit:i}){const f=g,_=i,e=y({}),v=m("catagory"),a=m("by");function r(o){Object.keys(e.value).length&&(e.value={});for(let t of o)t.status in e.value?e.value[t.status]++:e.value[t.status]=1;const s=Object.entries(e.value).sort((t,n)=>n[1]-t[1]);e.value=Object.fromEntries(s)}function k(o){v.value="status",a.value=o,_("refresh")}return(o,s)=>(u(),c("mdui-collapse",null,[l("mdui-collapse-item",X,[l("mdui-list-item",{slot:"header",icon:"done",rounded:"",onClick:s[0]||(s[0]=t=>r(f.tasks))},s[1]||(s[1]=[w(" 状态 "),l("mdui-icon",{slot:"end-icon",name:"keyboard_arrow_down"},null,-1)])),l("div",ee,[(u(!0),c($,null,h(e.value,(t,n)=>(u(),c("mdui-list-item",{rounded:"",slot:"custom",onClick:d=>k(n)},p(n)+" - "+p(t)+"次 ",9,te))),256))])])]))}},ne={rounded:""},oe={style:{"margin-left":"2.5rem"}},le=["onClick"],ae={__name:"API",props:["tasks"],emits:["refresh"],setup(g,{emit:i}){const f=g,_=i,e=y({}),v=m("catagory"),a=m("by");function r(o){Object.keys(e.value).length&&(e.value={});for(let t of o)t.api in e.value?e.value[t.api]++:e.value[t.api]=1;const s=Object.entries(e.value).sort((t,n)=>n[1]-t[1]);e.value=Object.fromEntries(s)}function k(o){v.value="api",a.value=o===""?"N/A":o,_("refresh")}return(o,s)=>(u(),c("mdui-collapse",null,[l("mdui-collapse-item",ne,[l("mdui-list-item",{slot:"header",icon:"settings_applications",rounded:"",onClick:s[0]||(s[0]=t=>r(f.tasks))},s[1]||(s[1]=[w(" 接口 "),l("mdui-icon",{slot:"end-icon",name:"keyboard_arrow_down"},null,-1)])),l("div",oe,[(u(!0),c($,null,h(e.value,(t,n)=>(u(),c("mdui-list-item",{rounded:"",slot:"custom",onClick:d=>k(n)},p(n===""?"N/A":n)+" - "+p(t)+"次 ",9,le))),256))])])]))}},ie={rounded:""},re={style:{"margin-left":"2.5rem"}},ue=["onClick"],ce={__name:"Region",props:["tasks"],emits:["refresh"],setup(g,{emit:i}){const f=g,_=i,e=y({}),v=m("catagory"),a=m("by");function r(o){Object.keys(e.value).length&&(e.value={});for(let t of o)t.region in e.value?e.value[t.region]++:e.value[t.region]=1;const s=Object.entries(e.value).sort((t,n)=>n[1]-t[1]);e.value=Object.fromEntries(s)}function k(o){v.value="region",a.value=o,_("refresh")}return(o,s)=>(u(),c("mdui-collapse",null,[l("mdui-collapse-item",ie,[l("mdui-list-item",{slot:"header",icon:"location_on",rounded:"",onClick:s[0]||(s[0]=t=>r(f.tasks))},s[1]||(s[1]=[w(" 地区 "),l("mdui-icon",{slot:"end-icon",name:"keyboard_arrow_down"},null,-1)])),l("div",re,[(u(!0),c($,null,h(e.value,(t,n)=>(u(),c("mdui-list-item",{rounded:"",slot:"custom",onClick:d=>k(n)},p(n)+" - "+p(t)+"次 ",9,ue))),256))])])]))}},de={rounded:""},me={style:{"margin-left":"2.5rem"}},ve=["onClick"],fe={__name:"Device",props:["tasks"],emits:["refresh"],setup(g,{emit:i}){const f=g,_=i,e=y({}),v=m("catagory"),a=m("by");function r(o){Object.keys(e.value).length&&(e.value={});for(let t of o)t.device in e.value?e.value[t.device]++:e.value[t.device]=1;const s=Object.entries(e.value).sort((t,n)=>n[1]-t[1]);e.value=Object.fromEntries(s)}function k(o){v.value="device",a.value=o===""?"N/A":o,_("refresh")}return(o,s)=>(u(),c("mdui-collapse",null,[l("mdui-collapse-item",de,[l("mdui-list-item",{slot:"header",icon:"devices",rounded:"",onClick:s[0]||(s[0]=t=>r(f.tasks))},s[1]||(s[1]=[w(" 设备 "),l("mdui-icon",{slot:"end-icon",name:"keyboard_arrow_down"},null,-1)])),l("div",me,[(u(!0),c($,null,h(e.value,(t,n)=>(u(),c("mdui-list-item",{rounded:"",slot:"custom",onClick:d=>k(n)},p(n===""?"Other":n)+" - "+p(t)+"次 ",9,ve))),256))])])]))}},_e={rounded:""},pe={style:{"margin-left":"2.5rem"}},ke=["onClick"],ge={__name:"Referer",props:["tasks"],emits:["refresh"],setup(g,{emit:i}){const f=g,_=i,e=y({}),v=m("catagory"),a=m("by");function r(o){Object.keys(e.value).length&&(e.value={});for(let t of o)t.referer in e.value?e.value[t.referer]++:e.value[t.referer]=1;const s=Object.entries(e.value).sort((t,n)=>n[1]-t[1]);e.value=Object.fromEntries(s)}function k(o){v.value="referer",a.value=o===""?"N/A":o,_("refresh")}return(o,s)=>(u(),c("mdui-collapse",null,[l("mdui-collapse-item",_e,[l("mdui-list-item",{slot:"header",icon:"source",rounded:"",onClick:s[0]||(s[0]=t=>r(f.tasks))},s[1]||(s[1]=[w(" 来源 "),l("mdui-icon",{slot:"end-icon",name:"keyboard_arrow_down"},null,-1)])),l("div",pe,[(u(!0),c($,null,h(e.value,(t,n)=>(u(),c("mdui-list-item",{rounded:"",slot:"custom",onClick:d=>k(n)},p(n===""?"N/A":n)+" - "+p(t)+"次 ",9,ke))),256))])])]))}},ye={rounded:""},be={style:{"margin-left":"2.5rem"}},$e=["onClick"],he={__name:"Info",props:["tasks"],emits:["refresh"],setup(g,{emit:i}){const f=g,_=i,e=y({}),v=m("catagory"),a=m("by");function r(o){Object.keys(e.value).length&&(e.value={});for(let t of o)t.more_info in e.value?e.value[t.more_info]++:e.value[t.more_info]=1;const s=Object.entries(e.value).sort((t,n)=>n[1]-t[1]);e.value=Object.fromEntries(s)}function k(o){v.value="more_info",a.value=o===""?"N/A":o,_("refresh")}return(o,s)=>(u(),c("mdui-collapse",null,[l("mdui-collapse-item",ye,[l("mdui-list-item",{slot:"header",icon:"info",rounded:"",onClick:s[0]||(s[0]=t=>r(f.tasks))},s[1]||(s[1]=[w(" 信息 "),l("mdui-icon",{slot:"end-icon",name:"keyboard_arrow_down"},null,-1)])),l("div",be,[(u(!0),c($,null,h(e.value,(t,n)=>(u(),c("mdui-list-item",{rounded:"",slot:"custom",onClick:d=>k(n)},p(n===""?"N/A":n)+" - "+p(t)+"次 ",9,$e))),256))])])]))}},we={rounded:""},Ce={style:{"margin-left":"2.5rem"}},Oe=["onClick"],je={__name:"Temp",props:["tasks"],emits:["refresh"],setup(g,{emit:i}){const f=g,_=i,e=y({}),v=m("catagory"),a=m("by");function r(o){Object.keys(e.value).length&&(e.value={});for(let t of o)t.temp in e.value?e.value[t.temp]++:e.value[t.temp]=1;const s=Object.entries(e.value).sort((t,n)=>n[1]-t[1]);e.value=Object.fromEntries(s)}function k(o){v.value="temp",a.value=o===""?"N/A":o,_("refresh")}return(o,s)=>(u(),c("mdui-collapse",null,[l("mdui-collapse-item",we,[l("mdui-list-item",{slot:"header",icon:"file_download_done",rounded:"",onClick:s[0]||(s[0]=t=>r(f.tasks))},s[1]||(s[1]=[w(" 缓存 "),l("mdui-icon",{slot:"end-icon",name:"keyboard_arrow_down"},null,-1)])),l("div",Ce,[(u(!0),c($,null,h(e.value,(t,n)=>(u(),c("mdui-list-item",{rounded:"",slot:"custom",onClick:d=>k(n)},p(n===""?"N/A":n)+" - "+p(t)+"次 ",9,Oe))),256))])])]))}},xe={class:"filter"},Ee={__name:"Filter",setup(g){const i=y([]),f=m("catagory"),_=m("by"),e=m("emitter");return N(async()=>{const v=await A("fetchTask",f.value,_.value);v&&(i.value=v.task_data)}),(v,a)=>(u(),c("div",xe,[b(ce,{tasks:i.value,onRefresh:a[0]||(a[0]=r=>e.value=4)},null,8,["tasks"]),b(Z,{tasks:i.value,onRefresh:a[1]||(a[1]=r=>e.value=4)},null,8,["tasks"]),b(se,{tasks:i.value,onRefresh:a[2]||(a[2]=r=>e.value=4)},null,8,["tasks"]),b(ae,{tasks:i.value,onRefresh:a[3]||(a[3]=r=>e.value=4)},null,8,["tasks"]),b(H,{tasks:i.value,onRefresh:a[4]||(a[4]=r=>e.value=4)},null,8,["tasks"]),b(ge,{tasks:i.value,onRefresh:a[5]||(a[5]=r=>e.value=4)},null,8,["tasks"]),b(W,{tasks:i.value,onRefresh:a[6]||(a[6]=r=>e.value=4)},null,8,["tasks"]),b(fe,{tasks:i.value,onRefresh:a[7]||(a[7]=r=>e.value=4)},null,8,["tasks"]),b(he,{tasks:i.value,onRefresh:a[8]||(a[8]=r=>e.value=4)},null,8,["tasks"]),b(je,{tasks:i.value,onRefresh:a[9]||(a[9]=r=>e.value=4)},null,8,["tasks"])]))}},Ne={style:{display:"block"}},Te={__name:"Task",setup(g){const i=y("none"),f=y("");return j("catagory",i),j("by",f),(_,e)=>(u(),c("mdui-layout-main",Ne,[b(P),b(Ee)]))}};export{Te as default};
